<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>ubuntu - CLI cookbook</title>
        <meta name="keywords" content="wiki, makrdown, linux, CLI, cookbook"/>
        <meta name="description" content="CLI cookbook"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<script type="text/javascript">
			var CONFIG = {
			analytics: {
				google: 'UA-51515330-3'
			}
		};
</script>
    </head>

    <body>
    <a href="https://github.com/Xuanwo/CLIWiki"><img style="position: absolute; top: 0; right: 0; border: 0;" src="/static/images/fork.png" alt="Fork me on GitHub" data-canonical-src="/static/images/forkme_right_gray_6d6d6d.png"></a>
        <div id="container">
            
    <div id="header">
        <div id="post-nav">
            
            <a href="/">Home</a> » <a href="/#Linux">Linux</a> » ubuntu
            
        </div>
    </div>
    <div class="clearfix"></div>
    <div id="title">ubuntu</div>
    <div id="content">
        <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#usrbinld-cannot-find-lxxx">解决/usr/bin/ld: cannot find -lxxx错误</a></li>
<li><a href="#fatal-error-pythonh-no-such-file-or-directory">解决fatal error: Python.h: No such file or directory错误</a></li>
<li><a href="#aira2">aira2及其前端的配置</a><ul>
<li><a href="#aria2">安装aria2</a></li>
<li><a href="#_1">前端配置</a></li>
<li><a href="#_2">后台启动</a></li>
<li><a href="#_3">开机自启</a></li>
</ul>
</li>
<li><a href="#ubuntucisco-anyconnent-vpn">Ubuntu支持Cisco Anyconnent VPN</a></li>
<li><a href="#jetbrains">JetBrains开发工具的安装</a></li>
<li><a href="#_4">查看端口占用情况</a></li>
<li><a href="#_5">查看运行中的进程</a></li>
<li><a href="#_6">杀死某个僵死的进程</a></li>
<li><a href="#ntfs">开机自动挂载NTFS分区</a></li>
<li><a href="#_7">安装英伟达私有驱动并进行双显卡切换</a></li>
<li><a href="#mp3">转换MP3编码</a></li>
<li><a href="#_8">在后台运行程序</a></li>
<li><a href="#ssh">通过SSH传输文件</a></li>
<li><a href="#ssh-agent">将密钥加入SSH-Agent</a></li>
<li><a href="#_9">查看内核</a></li>
<li><a href="#_10">修改分屏分辨率</a></li>
</ul>
</div>
<h2 id="usrbinld-cannot-find-lxxx">解决/usr/bin/ld: cannot find -lxxx错误</h2>
<p><strong>原因：</strong></p>
<ol>
<li>系统没有安装相对应的lib</li>
<li>相对应的lib版本不对</li>
<li>lib(.so档)的符号链接不正确，没有连结到正确的函式库文件(.so)</li>
</ol>
<p><strong>解决方案：</strong></p>
<ol>
<li>先判断在<code>/usr/lib</code>下的相对应的函式库文件(.so)的符号链接是否正确，若不正确改成正确的连结目标即可解决问题。</li>
<li>若不是符号链接的问题引起，而是系统缺少相对应的lib，则安装lib即可解决。</li>
</ol>
<p><strong>样例：</strong></p>
<blockquote>
<p>包名格式
<code>lxxx</code>对应so档一般为<code>libxxx.so</code>，对应apt软件包一般为<code>libxxx-dev</code></p>
</blockquote>
<p><strong>符号链接不正确</strong></p>
<div class="hlcode"><pre><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ld</span><span class="o">:</span> <span class="n">cannot</span> <span class="n">find</span> <span class="o">-</span><span class="n">lXtst</span>
</pre></div>


<p>检查发现存在<code>libXtst.so.6</code>，使用命令<code>ln -s libXtst.so.6 libXtst.so</code>建立软连接即可。</p>
<p><strong>未安装对应包</strong></p>
<div class="hlcode"><pre><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ld</span><span class="o">:</span> <span class="n">cannot</span> <span class="n">find</span> <span class="o">-</span><span class="n">lc</span>
</pre></div>


<p>不是符号链接的问题，则使用命令<code>apt-get install libc-dev</code></p>
<h2 id="fatal-error-pythonh-no-such-file-or-directory">解决fatal error: Python.h: No such file or directory错误</h2>
<p>安装指定的Python版本</p>
<div class="hlcode"><pre><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python3</span><span class="mf">.5</span><span class="o">-</span><span class="n">dev</span>
</pre></div>


<p><em>具体版本取决于编译需要</em></p>
<h2 id="aira2">aira2及其前端的配置</h2>
<h3 id="aria2">安装aria2</h3>
<div class="hlcode"><pre>sudo apt-get install aria2
</pre></div>


<h3 id="_1">前端配置</h3>
<p>可以选择uget或者Web化前端，uget直接在设置中开启即可，此处主要介绍一下前端配置。</p>
<p>首先clone代码：</p>
<div class="hlcode"><pre>git clone https://github.com/ziahamza/webui-aria2.git
</pre></div>


<p>然后创建<code>~/.aria2/aria2.conf</code>，内容请参考<a href="http://aria2c.com/usage.html">此处</a></p>
<p>根据自己的需要修改即可，需要注意的有以下地方：</p>
<ul>
<li>涉及到地址的地方最好使用绝对路径，相对路径会出现找不到文件之类的奇怪问题</li>
<li>不支持中文路径</li>
<li>按照自己的需要设置<code>rpc-secre</code>并修改<code>webui-aria2</code>路径下的<code>configuration.js</code>文件（<em>直接在浏览器中填写的话，无法保存</em>）</li>
</ul>
<h3 id="_2">后台启动</h3>
<p>首先使用<code>aria2c</code>命令尝试启动，若测试一切正常，则可以使用<code>aria2c -D</code>命令使其在后台运行。</p>
<h3 id="_3">开机自启</h3>
<p>在Ubuntu上可以通过修改<code>/etc/rc.local</code>的方式设置开机自启，只需要填写自己需要的命令即可。使用Sudo权限打开文件，在<code>exit 0</code>的上方加入：</p>
<div class="hlcode"><pre><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">aria2c</span> <span class="o">--</span><span class="n">conf</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">xuanwo</span><span class="o">/</span><span class="p">.</span><span class="n">aria2</span><span class="o">/</span><span class="n">aria2</span><span class="p">.</span><span class="n">conf</span> <span class="o">&amp;</span>
</pre></div>


<p>按照自己的需求修改，需要注意以下地方：</p>
<ul>
<li><code>rc.local</code>在启动时没有初始化path，故aria2c不会自动加载配置文件，需要自己手动指定配置文件地址并使用绝对地址运行aria2c，否则无法正确开机自启。</li>
<li><code>-D</code>参数错误退出是不会输出stderr信息，推荐使用<code>&amp;</code>来让进程运行于后台</li>
<li>一定要确保命令正确退出，否则，轻则程序没有正确自启，重则无法进入桌面</li>
</ul>
<blockquote>
<p>如果发现没有正确自启，可以使用<code>systemctl status re.loacl.service -l</code>命令查看输出的信息。</p>
</blockquote>
<h2 id="ubuntucisco-anyconnent-vpn">Ubuntu支持Cisco Anyconnent VPN</h2>
<p>由于Cisco的Anyconnect是一个私有的程序，只有在部署了Cisco VPN的地方才能够下载到相应的程序。因此我们可以转而使用开源的Openconnent：</p>
<div class="hlcode"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">network</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">openconnect</span><span class="o">-</span><span class="n">gnome</span>
</pre></div>


<p>安装完毕后，在网络管理器中添加网络-VPN，就能看到关于<code>Cisco Anyconnect兼容的VPN</code>选项。</p>
<h2 id="jetbrains">JetBrains开发工具的安装</h2>
<p>在官网上下载压缩包，在合适的位置解压缩，然后运行<code>bin</code>文件夹中对应sh文件即可。</p>
<blockquote>
<p>运行完毕后建议不要在移动文件夹，否则自动创建的快捷方式会失效，需要自行修改位置。</p>
</blockquote>
<h2 id="_4">查看端口占用情况</h2>
<div class="hlcode"><pre>netstat -ap | grep &lt;port&gt;
</pre></div>


<p>使用过程中经常出现端口被占用导致无法启动程序的情况，只要使用此命令查看端口占用，然后使用<code>kill</code>杀死占用端口的进程即可</p>
<h2 id="_5">查看运行中的进程</h2>
<div class="hlcode"><pre>ps -aux
</pre></div>


<blockquote>
<p>需要注意的是，只会显示当前用户开启的进程，如果想查看所有进程，需要添加<code>sudo</code></p>
</blockquote>
<h2 id="_6">杀死某个僵死的进程</h2>
<div class="hlcode"><pre><span class="nb">kill </span>pid
</pre></div>


<blockquote>
<p>在ZSH中输入<code>kill</code>然后敲击<code>tab</code>，会出现所有运行中的进程，输入名字即可自动转换为pid。</p>
</blockquote>
<h2 id="ntfs">开机自动挂载NTFS分区</h2>
<p>打开磁盘应用，选中自己想要自动挂载的NTFS分区，点击下方的设置-编辑挂载选项，然后勾选<code>启动时挂载</code>即可。</p>
<h2 id="_7">安装英伟达私有驱动并进行双显卡切换</h2>
<p>安装英伟达的驱动有两种方法：</p>
<ul>
<li>执行<code>sudo apt-get install nvidia-&lt;version&gt;</code></li>
<li>在<code>附加驱动</code>中勾选NVIDIA闭源驱动</li>
</ul>
<p>这两种方法本质上是一样的，当前的最新版本号为352。
安装完成后，在程序菜单中找到<code>NVIDIA X Server Setting</code>，然后在<code>PRIME Setting</code>中可以选择是使用<code>低能耗（Intel）</code>还是<code>高性能（NVIDIA）</code>模式。勾选完成后重启即可。</p>
<blockquote>
<p>按照程序的提示是只需要logout即可，但是我测试之后发现无法正常进入桌面，所以还是直接重启吧~</p>
</blockquote>
<h2 id="mp3">转换MP3编码</h2>
<p>转换MP3编码可以使用<code>EasyTag</code>。</p>
<div class="hlcode"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">easytag</span>
</pre></div>


<p>然后选择乱码的MP3，读取使用对应的语言，然后写入为<code>UTF-8</code>即可。</p>
<h2 id="_8">在后台运行程序</h2>
<ul>
<li><code>&lt;command&gt; &amp;</code>：后台运行</li>
<li><code>Ctrl+z</code>： 将命令转到后台并停止运行</li>
<li><code>jobs</code>：查看后台运行的任务</li>
<li><code>fg %&lt;id&gt;</code>：将后台任务调至前台运行</li>
<li><code>bg %&lt;id&gt;</code>：让后台任务从停止状态转为运行状态用</li>
</ul>
<p><strong>注意，以上所有的后台任务在退出当前Shell时都会中断</strong>，如果想在退出Shell或者SSH后，任务依然执行，可以使用下列命令：</p>
<ul>
<li><code>(&lt;command&gt; &amp;)</code>：将命令使用括号包裹，使其在另一个shell中运行</li>
<li><code>nohup &lt;command&gt; &amp;</code>：在命令之前加<code>nohup</code>，使得命令不受中断信号影响</li>
</ul>
<h2 id="ssh">通过SSH传输文件</h2>
<p>只需要使用scp命令：</p>
<div class="hlcode"><pre>scp <span class="nb">source </span>target
</pre></div>


<p>这里的源和目标均支持文件和目录，如果复制的是一个目录，需要在scp后添加<code>-r</code>参数。</p>
<h2 id="ssh-agent">将密钥加入SSH-Agent</h2>
<div class="hlcode"><pre>ssh-add + &lt;private key&gt;
</pre></div>


<h2 id="_9">查看内核</h2>
<div class="hlcode"><pre>uname -a
</pre></div>


<h2 id="_10">修改分屏分辨率</h2>
<p>执行如下命令，显示目前显示器支持的分辨率：</p>
<div class="hlcode"><pre><span class="n">xrandr</span>
</pre></div>


<p>结果如下：</p>
<div class="hlcode"><pre><span class="n">Screen</span> <span class="mi">0</span><span class="o">:</span> <span class="n">minimum</span> <span class="mi">8</span> <span class="n">x</span> <span class="mi">8</span><span class="p">,</span> <span class="n">current</span> <span class="mi">3286</span> <span class="n">x</span> <span class="mi">1080</span><span class="p">,</span> <span class="n">maximum</span> <span class="mi">32767</span> <span class="n">x</span> <span class="mi">32767</span>
<span class="n">LVDS1</span> <span class="n">connected</span> <span class="n">primary</span> <span class="mi">1366</span><span class="n">x768</span><span class="o">+</span><span class="mi">0</span><span class="o">+</span><span class="mi">0</span> <span class="p">(</span><span class="n">normal</span> <span class="n">left</span> <span class="n">inverted</span> <span class="n">right</span> <span class="n">x</span> <span class="n">axis</span> <span class="n">y</span> <span class="n">axis</span><span class="p">)</span> <span class="mi">344</span><span class="n">mm</span> <span class="n">x</span> <span class="mi">194</span><span class="n">mm</span>
   <span class="mi">1366</span><span class="n">x768</span>      <span class="mf">60.01</span><span class="o">*+</span>
   <span class="mi">1360</span><span class="n">x768</span>      <span class="mf">59.80</span>    <span class="mf">59.96</span>
   <span class="mi">1280</span><span class="n">x720</span>      <span class="mf">60.00</span>
   <span class="mi">1024</span><span class="n">x768</span>      <span class="mf">60.00</span>
   <span class="mi">1024</span><span class="n">x576</span>      <span class="mf">60.00</span>
   <span class="mi">960</span><span class="n">x540</span>       <span class="mf">60.00</span>
   <span class="mi">800</span><span class="n">x600</span>       <span class="mf">60.32</span>    <span class="mf">56.25</span>
   <span class="mi">864</span><span class="n">x486</span>       <span class="mf">60.00</span>
   <span class="mi">640</span><span class="n">x480</span>       <span class="mf">59.94</span>
   <span class="mi">720</span><span class="n">x405</span>       <span class="mf">60.00</span>
   <span class="mi">680</span><span class="n">x384</span>       <span class="mf">60.00</span>
   <span class="mi">640</span><span class="n">x360</span>       <span class="mf">60.00</span>
<span class="n">DP1</span> <span class="n">disconnected</span> <span class="p">(</span><span class="n">normal</span> <span class="n">left</span> <span class="n">inverted</span> <span class="n">right</span> <span class="n">x</span> <span class="n">axis</span> <span class="n">y</span> <span class="n">axis</span><span class="p">)</span>
<span class="n">DP2</span> <span class="n">disconnected</span> <span class="p">(</span><span class="n">normal</span> <span class="n">left</span> <span class="n">inverted</span> <span class="n">right</span> <span class="n">x</span> <span class="n">axis</span> <span class="n">y</span> <span class="n">axis</span><span class="p">)</span>
<span class="n">HDMI1</span> <span class="n">disconnected</span> <span class="p">(</span><span class="n">normal</span> <span class="n">left</span> <span class="n">inverted</span> <span class="n">right</span> <span class="n">x</span> <span class="n">axis</span> <span class="n">y</span> <span class="n">axis</span><span class="p">)</span>
<span class="n">HDMI2</span> <span class="n">disconnected</span> <span class="p">(</span><span class="n">normal</span> <span class="n">left</span> <span class="n">inverted</span> <span class="n">right</span> <span class="n">x</span> <span class="n">axis</span> <span class="n">y</span> <span class="n">axis</span><span class="p">)</span>
<span class="n">VGA1</span> <span class="n">connected</span> <span class="mi">1920</span><span class="n">x1080</span><span class="o">+</span><span class="mi">1366</span><span class="o">+</span><span class="mi">0</span> <span class="p">(</span><span class="n">normal</span> <span class="n">left</span> <span class="n">inverted</span> <span class="n">right</span> <span class="n">x</span> <span class="n">axis</span> <span class="n">y</span> <span class="n">axis</span><span class="p">)</span> <span class="mi">0</span><span class="n">mm</span> <span class="n">x</span> <span class="mi">0</span><span class="n">mm</span>
   <span class="mi">1024</span><span class="n">x768</span>      <span class="mf">60.00</span>
   <span class="mi">800</span><span class="n">x600</span>       <span class="mf">60.32</span>    <span class="mf">56.25</span>
   <span class="mi">848</span><span class="n">x480</span>       <span class="mf">60.00</span>
   <span class="mi">640</span><span class="n">x480</span>       <span class="mf">59.94</span>
<span class="n">VIRTUAL1</span> <span class="n">disconnected</span> <span class="p">(</span><span class="n">normal</span> <span class="n">left</span> <span class="n">inverted</span> <span class="n">right</span> <span class="n">x</span> <span class="n">axis</span> <span class="n">y</span> <span class="n">axis</span><span class="p">)</span>
</pre></div>


<p>我们可以看到显示器目前是不支持1920x1080分辨率的，因此我们需要首先自行生成相关分辨率的配置参数：</p>
<div class="hlcode"><pre><span class="n">cvt</span> <span class="mi">1920</span> <span class="mi">1080</span>
</pre></div>


<p>输出如下：</p>
<div class="hlcode"><pre><span class="cp"># 1920x1080 59.96 Hz (CVT 2.07M9) hsync: 67.16 kHz; pclk: 173.00 MHz</span>
<span class="n">Modeline</span> <span class="s">&quot;1920x1080_60.00&quot;</span>  <span class="mf">173.00</span>  <span class="mi">1920</span> <span class="mi">2048</span> <span class="mi">2248</span> <span class="mi">2576</span>  <span class="mi">1080</span> <span class="mi">1083</span> <span class="mi">1088</span> <span class="mi">1120</span> <span class="o">-</span><span class="n">hsync</span> <span class="o">+</span><span class="n">vsync</span>
</pre></div>


<p>然后新建显示模式并添加到配置列表中去：</p>
<div class="hlcode"><pre><span class="n">sudo</span> <span class="n">xrandr</span> <span class="o">--</span><span class="n">newmode</span> <span class="s">&quot;1920x1080_60.00&quot;</span>  <span class="mf">173.00</span>  <span class="mi">1920</span> <span class="mi">2048</span> <span class="mi">2248</span> <span class="mi">2576</span>  <span class="mi">1080</span> <span class="mi">1083</span> <span class="mi">1088</span> <span class="mi">1120</span> <span class="o">-</span><span class="n">hsync</span> <span class="o">+</span><span class="n">vsync</span>
<span class="n">sudo</span> <span class="n">xrandr</span> <span class="o">--</span><span class="n">addmode</span> <span class="n">VGA1</span> <span class="s">&quot;1920x1080_60.00&quot;</span>
</pre></div>


<p>然后我们就可以设定显示屏的分辨率了：</p>
<div class="hlcode"><pre><span class="n">xrandr</span> <span class="o">--</span><span class="n">output</span> <span class="n">VGA1</span> <span class="o">--</span><span class="n">mode</span> <span class="mi">1920</span><span class="n">x1080_60</span><span class="mf">.00</span>
</pre></div>


<p>如果担心自己设定的分辨率不支持，可以再追加一个<code>sleep</code>命令以保证不会困在无效的分辨率下：</p>
<div class="hlcode"><pre><span class="n">xrandr</span> <span class="o">--</span><span class="n">output</span> <span class="n">VGA1</span> <span class="o">--</span><span class="n">mode</span> <span class="mi">1920</span><span class="n">x1080_60</span><span class="mf">.00</span> <span class="o">&amp;&amp;</span> <span class="n">sleep</span> <span class="mi">5</span>
</pre></div>


<p>此配置仅在当前会话下生效，如果需要永久生效可以考虑修改<code>xorg.conf</code>或者设定一个开机执行的脚本。</p>
<blockquote>
<p>已知问题：
使用英伟达的官方驱动会导致分屏分辨率切换异常，暂时无解，使用Intel的Power Save模式可以正常开启分屏</p>
</blockquote>
    </div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2015-2016 Xuanwo.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
		<script type="text/javascript" src="/static/js/analytics_google-analytics.js"></script>
    </body>
</html>