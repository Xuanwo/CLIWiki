<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/colorful.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>grep - CLI Wiki</title>
    <meta name="keywords" content="wiki, makrdown, linux, CLI, cookbook"/>
    <meta name="description" content="CLI cookbook"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
  </head>

  <body>
    <div id="container" class="typo">
      
<div id="header">
  <div id="post-nav">
    <a href="/">CLI Wiki</a>
    &nbsp;&#187;&nbsp;
    <a href="/#Tools">Tools</a>
    &nbsp;&#187;&nbsp;grep
    <span class="updated">Updated&nbsp;
    2015-11-14 15:50:36
    </span>
  </div>
</div>
<div class="clearfix"></div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">只输出匹配的部分</a></li>
</ul>
</div>
<h2 id="_1">只输出匹配的部分</h2>
<p>现有文件<code>sample.txt</code>，内容如下：</p>
<div class="hlcode"><pre>                      <span class="mi">13457172</span>   <span class="mi">9331692</span>   <span class="mi">3441888</span>  <span class="mi">74</span><span class="o">%</span> <span class="o">/</span>
<span class="n">tmpfs</span>                   <span class="mi">509288</span>         <span class="mi">0</span>    <span class="mi">509288</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">init</span><span class="o">/</span><span class="n">rw</span>
<span class="n">varrun</span>                  <span class="mi">509288</span>       <span class="mi">160</span>    <span class="mi">509128</span>   <span class="mi">1</span><span class="o">%</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span>
<span class="n">varlock</span>                 <span class="mi">509288</span>         <span class="mi">0</span>    <span class="mi">509288</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lock</span>
<span class="n">udev</span>                    <span class="mi">509288</span>       <span class="mi">156</span>    <span class="mi">509132</span>   <span class="mi">1</span><span class="o">%</span> <span class="o">/</span><span class="n">dev</span>
<span class="n">tmpfs</span>                   <span class="mi">509288</span>       <span class="mi">548</span>    <span class="mi">508740</span>   <span class="mi">1</span><span class="o">%</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">shm</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda6</span>             <span class="mi">39070048</span>  <span class="mi">14621620</span>  <span class="mi">24448428</span>  <span class="mi">38</span><span class="o">%</span> <span class="o">/</span><span class="n">host</span>
<span class="n">lrm</span>                     <span class="mi">509288</span>      <span class="mi">2392</span>    <span class="mi">506896</span>   <span class="mi">1</span><span class="o">%</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="mf">2.6.28</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="n">generic</span><span class="o">/</span><span class="k">volatile</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda7</span>             <span class="mi">29317692</span>  <span class="mi">11334916</span>  <span class="mi">17982776</span>  <span class="mi">39</span><span class="o">%</span> <span class="o">/</span><span class="n">apple</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda5</span>             <span class="mi">48828008</span>    <span class="mi">389116</span>  <span class="mi">48438892</span>   <span class="mi">1</span><span class="o">%</span> <span class="o">/</span><span class="n">opt</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda9</span>             <span class="mi">28327964</span>  <span class="mi">14598436</span>  <span class="mi">12290508</span>  <span class="mi">55</span><span class="o">%</span> <span class="o">/</span><span class="n">apple</span><span class="o">/</span><span class="n">vmware</span>
</pre></div>


<p>现在我们只想获取所有的百分比，可以使用下列命令：</p>
<div class="hlcode"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">o</span> <span class="err">&#39;</span><span class="p">..</span><span class="o">%</span><span class="err">&#39;</span> <span class="n">sample</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>参数说明</p>
<ul>
<li><code>-o</code>,<code>--only-matching</code> : 只输出表达式中匹配的部分</li>
</ul>
<p>得到的输出如下：</p>
<div class="hlcode"><pre><span class="mi">74</span><span class="o">%</span>
 <span class="mi">0</span><span class="o">%</span>
 <span class="mi">1</span><span class="o">%</span>
 <span class="mi">0</span><span class="o">%</span>
 <span class="mi">1</span><span class="o">%</span>
 <span class="mi">1</span><span class="o">%</span>
<span class="mi">38</span><span class="o">%</span>
 <span class="mi">1</span><span class="o">%</span>
<span class="mi">39</span><span class="o">%</span>
 <span class="mi">1</span><span class="o">%</span>
<span class="mi">55</span><span class="o">%</span>
</pre></div>
  
</div>
      
<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
var disqus_config = function () {
	this.page.url = "https://cli.xuanwo.org/Tools/grep"; // Replace PAGE_URL with your page's canonical URL variable
	this.page.identifier = "grep" ; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//clicookbook.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

    </div>
    <div id="footer">
      <div class="footer-left">
        <p>
        Copyright © 2016 Xuanwo.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        Theme by <a href="https://git.coding.net/tankywoo/yasimple_x2.git" target="_blank">YASimple_X2</a>.
        </p>
      </div> <!-- end footer-left -->
      <div class="footer-right">
        <p>Site Generated 2016-08-20 15:18:42</p>
      </div> <!-- end footer-right -->
    </div>
  </body>
</html>